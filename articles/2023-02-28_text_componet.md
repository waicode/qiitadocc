<!--
title:   テキストを完全にコンポーネント化してタイポグラフィの秩序を守る
tags:    Vue.js,storybook,フロントエンド,コンポーネント
id:      14625860116ea1ed6b5c
private: true
-->

前回、ボトムアップで小さなコンポーネントを組み合わせてページを作る「コンポーネント駆動開発」は小さな画面開発でも十分に恩恵を受けることができる事例を紹介しました。

今回は、その記事で紹介した「汎用コンポーネント」の具体的な事例となる「テキストコンポーネント」についての実装例を紹介します。

# テキストコンポーネントとは

その名のとおり、文字サイズ・太さ・高さなど、テキストの見た目に関連するあらゆる情報を持つコンポーネントです。

こんな風に文字へ適用させて使います。

サンプルコード。

このコンポーネントをつくるということは、逆に言えば他のコンポーネントやページがテキストの情報を持つということはありません。つまり、すべての文字情報がテキストコンポーネントで囲まれ、コンポーネントやページにテキストのためのCSSが入る余地は一切なくなります。原則、文字装飾を個別にCSS適用させることは禁止です。

コンポーネントのタイポグラフィ種別を指定すると、フォントサイズや行の高さや字間が決まります。そのうえで、コンポーネントのプロパティで個別に上書きできるようにしておきます。

サンプルコード。

# やりすぎでは？CSSで良いのでは？

最初はそう思っていました。

ただ、このコンポーネントをつくること自体の実装コストがそれほど大きくありません。そのため、慣れてしまうと、規模問わずコンポーネント駆動で開発するのであれば汎用コンポーネント化したくなります。

では、慣れていない人の可読性についてはどうでしょうか。たしかに、各コンポーネントやページで、テキストに適用されるスタイルの記述を直接見ることができなくなります。しかしながら、適用されているタイポグラフィ種別を見て判断するのは、それほど難しいことではありません。

サンプルコード。

むしろ、個々のテキストのためのCSSが消えることで、それ以外のスタイル記述の視認性が上がるメリットの方が大きいように感じます。

# テキストをコンポーネント化することで得られる効果

大きく2つあります。

この記事では、テキストに込められたデザインの意図を「タイポグラフィ」と表現しています。

## タイポグラフィがコンポーネントに閉じ込められて維持しやすくなる

これは保守運用を想定した、分かりやすいメリットです。

コンポーネント化されたテキストを通じてスタイルが実装されるため、一度仕組みをつくりあげてしまえば、ルールから逸脱したタイポグラフィが意図せず途中からデザインに入ってしまうことを防ぎやすくなります。

## 最初の実装時にルールから逸脱したタイポグラフィに気付くことができる

そしてもう１つ。実感値としては、こちらのメリットが大きいのです。

コンポーネントの実装によってタイポグラフィの全体像が把握でき、実装をしていく中でルールから逸脱したタイポグラフィに気付くことができます。

一例として、部分的に別ページから切り出してもってきた表示エリアにおいて、タイポグラフィのルールが適用されていないことを検知できました。

スタイル記述を1箇所にまとめるだけでも同じ効果は期待できます。しかし、そのスタイルが何のためにどのように適用されているのかを厳密に判断するのが難しくなってきます。

その点、コンポーネント化するとすべての文字情報が意図を持って設計されたテキストコンポーネントタグで囲まれるので、例外が入る余地はなくなります。

# Storybookでコンポーネントの意図をドキュメント化する

実装したコンポーネントを意図通り使ってもらうため、ドキュメント化は大切です。

`@storybook/addon-docs` を使えば、ソースコードに書いたコメントをStorybook上にドキュメントとして反映できます。

プロパティの選択肢候補を見た目と一緒に確認できます。

# テキストをコンポーネント化してタイポグラフィの秩序を守る

テキストをコンポーネント化することで、意図しないタイポグラフィに気付くことができ、保守性をあげることができます。

デザインにタイポグラフィのルールが厳密に定義されているときは特に有効な手段となるので、ぜひ試してみてください。
